import{R as G,u as O,e as W,I as q,x as re,f as K,aR as X,F as ue,r as o,o as f,n as _,w as e,m as n,a as t,q as g,t as m,g as B,y as ie,l as V,K as ce,M as de,Z as me,b as p,S as T,T as z,E as x,U as S,L as pe,p as M}from"./main.d0ffa6eb.js";import{A as fe}from"./AstronautIcon.0da5260a.js";const _e={props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup($){const U=$,u=G();O();const{t:h}=W();q();const y=re();K();const C=X();ue("utils");function v(i){u.openDialog({title:h("general.are_you_sure"),message:h("users.confirm_delete",1),yesLabel:h("general.ok"),noLabel:h("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(c=>{c&&C.deleteUser({ids:[i]}).then(s=>{s&&U.loadData&&U.loadData()})})}return(i,c)=>{const s=o("BaseIcon"),F=o("BaseButton"),b=o("BaseDropdownItem"),k=o("router-link"),w=o("BaseDropdown");return f(),_(w,null,{activator:e(()=>[n(y).name==="users.view"?(f(),_(F,{key:0,variant:"primary"},{default:e(()=>[t(s,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(f(),_(s,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[t(k,{to:`/admin/users/${$.row.id}/edit`},{default:e(()=>[t(b,null,{default:e(()=>[t(s,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),g(" "+m(i.$t("general.edit")),1)]),_:1})]),_:1},8,["to"]),t(b,{onClick:c[0]||(c[0]=R=>v($.row.id))},{default:e(()=>[t(s,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),g(" "+m(i.$t("general.delete")),1)]),_:1})]),_:1})}}},he={class:"flex items-center justify-end space-x-5"},ge={class:"pt-6"},ye={class:"flex"},Be={class:"relative table-container"},ve={class:"relative flex items-center justify-end h-5 border-gray-200 border-solid"},be={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},ke={class:"absolute z-10 items-center left-6 top-2.5 select-none"},we={class:"custom-control custom-checkbox"},Ue={setup($){O();const U=G(),u=X(),h=q();K();let y=B(!1);const C=B(!1);let v=B(!0);B(null),B("created_at"),B(!1);const{t:i}=W();let c=B(null),s=ie({name:"",email:"",phone:""});const F=V(()=>[{key:"status",thClass:"extra",tdClass:"font-medium text-gray-900",sortable:!1},{key:"name",label:i("users.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"email",label:"Email"},{key:"phone",label:i("users.phone")},{key:"created_at",label:i("users.added_on")},{key:"actions",tdClass:"text-right text-sm font-medium",sortable:!1}]),b=V(()=>!u.totalUsers&&!v.value),k=V({get:()=>u.selectedUsers,set:l=>u.selectUser(l)}),w=V({get:()=>u.selectAllField,set:l=>u.setSelectAllState(l)});ce(s,()=>{R()},{deep:!0}),de(()=>{u.fetchUsers(),u.fetchRoles()}),me(()=>{u.selectAllField&&u.selectAllUsers()});function R(){j()}function j(){c.value&&c.value.refresh()}async function Z({page:l,filter:r,sort:I}){let P={display_name:s.name!==null?s.name:"",phone:s.phone!==null?s.phone:"",email:s.email!==null?s.email:"",orderByField:I.fieldName||"created_at",orderBy:I.order||"desc",page:l};v.value=!0;let d=await u.fetchUsers(P);return v.value=!1,C.value=d.data.data.length>0,{data:d.data.data,pagination:{totalPages:d.data.meta.last_page,currentPage:l,totalCount:d.data.meta.total,limit:10}}}function E(){s.name="",s.email="",s.phone=null}function J(){y.value&&E(),y.value=!y.value}function Q(){U.openDialog({title:i("general.are_you_sure"),message:i("users.confirm_delete",2),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(l=>{l&&u.deleteMultipleUsers().then(r=>{r.data.success&&c.value&&c.value.refresh()})})}return(l,r)=>{const I=o("BaseBreadcrumbItem"),P=o("BaseBreadcrumb"),d=o("BaseIcon"),D=o("BaseButton"),Y=o("BasePageHeader"),A=o("BaseInput"),N=o("BaseInputGroup"),L=o("router-link"),ee=o("BaseFilterWrapper"),te=o("BaseEmptyPlaceholder"),ae=o("BaseDropdownItem"),se=o("BaseDropdown"),H=o("BaseCheckbox"),le=o("BaseTable"),ne=o("BasePage");return f(),_(ne,null,{default:e(()=>[t(Y,{title:l.$t("users.title")},{actions:e(()=>[p("div",he,[T(t(D,{variant:"primary-outline",onClick:J},{right:e(a=>[n(y)?(f(),_(d,{key:1,name:"XIcon",class:x(a.class)},null,8,["class"])):(f(),_(d,{key:0,name:"FilterIcon",class:x(a.class)},null,8,["class"]))]),default:e(()=>[g(m(l.$t("general.filter"))+" ",1)]),_:1},512),[[z,n(u).totalUsers]]),n(h).currentUser.is_owner?(f(),_(D,{key:0,onClick:r[0]||(r[0]=a=>l.$router.push("users/create"))},{left:e(a=>[t(d,{name:"PlusIcon",class:x(a.class),"aria-hidden":"true"},null,8,["class"])]),default:e(()=>[g(" "+m(l.$t("users.add_user")),1)]),_:1})):S("",!0)])]),default:e(()=>[t(P,null,{default:e(()=>[t(I,{title:l.$t("general.home"),to:"dashboard"},null,8,["title"]),t(I,{title:l.$tc("users.title",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),t(ee,{show:n(y),class:"mt-3",onClear:E},{default:e(()=>[t(N,{label:l.$tc("users.name"),class:"flex-1 mt-2 mr-4"},{default:e(()=>[t(A,{modelValue:n(s).name,"onUpdate:modelValue":r[1]||(r[1]=a=>n(s).name=a),type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(N,{label:l.$tc("users.email"),class:"flex-1 mt-2 mr-4"},{default:e(()=>[t(A,{modelValue:n(s).email,"onUpdate:modelValue":r[2]||(r[2]=a=>n(s).email=a),type:"text",name:"email",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(N,{class:"flex-1 mt-2",label:l.$tc("users.phone")},{default:e(()=>[t(A,{modelValue:n(s).phone,"onUpdate:modelValue":r[3]||(r[3]=a=>n(s).phone=a),type:"text",name:"phone",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),p("div",ge,[C.value?(f(),_(L,{key:0,to:`/filtered-users-list?display_name=${n(s).name}&email=${n(s).email}&phone=${n(s).phone}`,target:"_blank"},{default:e(()=>[t(D,{class:"mr-3",variant:"primary-outline",type:"button"},{default:e(()=>[p("span",ye,m(l.$t("Download")),1)]),_:1})]),_:1},8,["to"])):S("",!0)])]),_:1},8,["show"]),T(t(te,{title:l.$t("users.no_users"),description:l.$t("users.list_of_users")},{actions:e(()=>[n(h).currentUser.is_owner?(f(),_(D,{key:0,variant:"primary-outline",onClick:r[4]||(r[4]=a=>l.$router.push("/admin/users/create"))},{left:e(a=>[t(d,{name:"PlusIcon",class:x(a.class)},null,8,["class"])]),default:e(()=>[g(" "+m(l.$t("users.add_user")),1)]),_:1})):S("",!0)]),default:e(()=>[t(fe,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[z,n(b)]]),T(p("div",Be,[p("div",ve,[n(u).selectedUsers.length?(f(),_(se,{key:0},{activator:e(()=>[p("span",be,[g(m(l.$t("general.actions"))+" ",1),t(d,{name:"ChevronDownIcon",class:"h-5"})])]),default:e(()=>[t(ae,{onClick:Q},{default:e(()=>[t(d,{name:"TrashIcon",class:"h-5 mr-3 text-gray-600"}),g(" "+m(l.$t("general.delete")),1)]),_:1})]),_:1})):S("",!0)]),t(le,{ref_key:"table",ref:c,data:Z,columns:n(F),class:"mt-3"},pe({header:e(()=>[p("div",ke,[t(H,{modelValue:n(w),"onUpdate:modelValue":r[5]||(r[5]=a=>M(w)?w.value=a:null),variant:"primary",onChange:n(u).selectAllUsers},null,8,["modelValue","onChange"])])]),"cell-status":e(({row:a})=>[p("div",we,[t(H,{id:a.data.id,modelValue:n(k),"onUpdate:modelValue":r[6]||(r[6]=oe=>M(k)?k.value=oe:null),value:a.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":e(({row:a})=>[t(L,{to:{path:`users/${a.data.id}/edit`},class:"font-medium text-primary-500"},{default:e(()=>[g(m(a.data.name),1)]),_:2},1032,["to"])]),"cell-phone":e(({row:a})=>[p("span",null,m(a.data.phone?a.data.phone:"-"),1)]),"cell-created_at":e(({row:a})=>[p("span",null,m(a.data.formatted_created_at),1)]),_:2},[n(h).currentUser.is_owner?{name:"cell-actions",fn:e(({row:a})=>[t(_e,{row:a.data,table:n(c),"load-data":j},null,8,["row","table"])])}:void 0]),1032,["columns"])],512),[[z,!n(b)]])]),_:1})}}};export{Ue as default};
