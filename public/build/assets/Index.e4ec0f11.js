import{H as se,R as oe,I as ne,g as v,e as re,y as ue,l as C,Y as ce,Z as ie,$ as de,r as n,o as p,n as f,w as a,a as t,b as d,S as w,T as A,m as s,E as S,q as h,t as m,J as B,U as F,L as me,p as O}from"./main.d0ffa6eb.js";import{u as pe}from"./store.9cffc63a.js";import{_ as fe}from"./StoreIndexDropdown.3f9644f6.js";import{A as _e}from"./AstronautIcon.0da5260a.js";const ye={class:"flex items-center justify-end space-x-5"},he={class:"relative table-container"},Be={class:"relative flex items-center justify-end h-5"},be={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},ge={class:"absolute z-10 items-center left-6 top-2.5 select-none"},ve={class:"relative block"},Ie={setup(Ce){se();const Y=oe(),u=pe(),k=ne();let x=v(null),_=v(!1),V=v(!0);const{t:i}=re();let r=ue({display_name:"",contact_name:"",phone:""});const U=C(()=>!u.totalSuppliers&&!V.value),I=C({get:()=>u.selectedSuppliers,set:l=>u.selectedSupplier(l)}),$=C({get:()=>u.selectAllField,set:l=>u.setSelectAllState(l)}),L=C(()=>[{key:"status",thClass:"extra w-10 pr-0",sortable:!1,tdClass:"font-medium text-gray-900 pr-0"},{key:"name",label:i("customers.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"code",label:i("stores.code"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"phone",label:i("customers.phone")},{key:"email",label:i("customers.email")},{key:"created_at",label:i("items.added_on")},{key:"actions",tdClass:"text-right text-sm font-medium pl-0",thClass:"pl-0",sortable:!1}]);ce(r,()=>{W()},{debounce:500}),ie(()=>{u.selectAllField&&u.selectAllSuppliers()});function E(){x.value.refresh()}function W(){E()}function z(){return k.hasAbilities([B.DELETE_CUSTOMER,B.EDIT_CUSTOMER,B.VIEW_CUSTOMER])}async function H({page:l,filter:o,sort:y}){let T={display_name:r.display_name,contact_name:r.contact_name,phone:r.phone,orderByField:y.fieldName||"created_at",orderBy:y.order||"desc",page:l};V.value=!0;let c=await u.fetchStores(T);return V.value=!1,{data:c.data.data,pagination:{totalPages:c.data.meta.last_page,currentPage:l,totalCount:c.data.meta.total,limit:10}}}function M(){r.display_name="",r.contact_name="",r.phone=""}function j(){_.value&&M(),_.value=!_.value}let P=v(new Date);P.value=de(P).format("YYYY-MM-DD");function G(){Y.openDialog({title:i("general.are_you_sure"),message:i("stores.confirm_delete",2),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(l=>{l&&u.deleteMultipleStores().then(o=>{o.data&&E()})})}return(l,o)=>{const y=n("BaseBreadcrumbItem"),T=n("BaseBreadcrumb"),c=n("BaseIcon"),D=n("BaseButton"),q=n("BasePageHeader"),b=n("BaseInput"),g=n("BaseInputGroup"),J=n("BaseFilterWrapper"),X=n("BaseEmptyPlaceholder"),Z=n("BaseDropdownItem"),K=n("BaseDropdown"),R=n("BaseCheckbox"),N=n("BaseText"),Q=n("router-link"),ee=n("BaseFormatMoney"),te=n("BaseTable"),ae=n("BasePage");return p(),f(ae,null,{default:a(()=>[t(q,{title:l.$t("stores.title")},{actions:a(()=>[d("div",ye,[w(t(D,{variant:"primary-outline",onClick:j},{right:a(e=>[s(_)?(p(),f(c,{key:1,name:"XIcon",class:S(e.class)},null,8,["class"])):(p(),f(c,{key:0,name:"FilterIcon",class:S(e.class)},null,8,["class"]))]),default:a(()=>[h(m(l.$t("general.filter"))+" ",1)]),_:1},512),[[A,s(u).totalCustomers]]),s(k).hasAbilities(s(B).CREATE_CUSTOMER)?(p(),f(D,{key:0,onClick:o[0]||(o[0]=e=>l.$router.push("stores/create"))},{left:a(e=>[t(c,{name:"PlusIcon",class:S(e.class)},null,8,["class"])]),default:a(()=>[h(" "+m(l.$t("stores.add_new_store")),1)]),_:1})):F("",!0)])]),default:a(()=>[t(T,null,{default:a(()=>[t(y,{title:l.$t("general.home"),to:"dashboard"},null,8,["title"]),t(y,{title:l.$tc("stores.store",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),t(J,{show:s(_),class:"mt-5",onClear:M},{default:a(()=>[t(g,{label:l.$t("customers.display_name"),class:"text-left"},{default:a(()=>[t(b,{modelValue:s(r).display_name,"onUpdate:modelValue":o[1]||(o[1]=e=>s(r).display_name=e),type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(g,{label:l.$t("stores.code"),class:"text-left"},{default:a(()=>[t(b,{modelValue:s(r).code,"onUpdate:modelValue":o[2]||(o[2]=e=>s(r).code=e),type:"text",name:"code",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(g,{label:l.$t("customers.contact_name"),class:"text-left"},{default:a(()=>[t(b,{modelValue:s(r).contact_name,"onUpdate:modelValue":o[3]||(o[3]=e=>s(r).contact_name=e),type:"text",name:"address_name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(g,{label:l.$t("customers.phone"),class:"text-left"},{default:a(()=>[t(b,{modelValue:s(r).phone,"onUpdate:modelValue":o[4]||(o[4]=e=>s(r).phone=e),type:"text",name:"phone",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["show"]),w(t(X,{title:l.$t("stores.no_stores"),description:l.$t("stores.list_of_stores")},{actions:a(()=>[s(k).hasAbilities(s(B).CREATE_CUSTOMER)?(p(),f(D,{key:0,variant:"primary-outline",onClick:o[5]||(o[5]=e=>l.$router.push("/admin/stores/create"))},{left:a(e=>[t(c,{name:"PlusIcon",class:S(e.class)},null,8,["class"])]),default:a(()=>[h(" "+m(l.$t("stores.add_new_store")),1)]),_:1})):F("",!0)]),default:a(()=>[t(_e,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[A,s(U)]]),w(d("div",he,[d("div",Be,[s(u).selectedSuppliers.length?(p(),f(K,{key:0},{activator:a(()=>[d("span",be,[h(m(l.$t("general.actions"))+" ",1),t(c,{name:"ChevronDownIcon"})])]),default:a(()=>[t(Z,{onClick:G},{default:a(()=>[t(c,{name:"TrashIcon",class:"mr-3 text-gray-600"}),h(" "+m(l.$t("general.delete")),1)]),_:1})]),_:1})):F("",!0)]),t(te,{ref_key:"tableComponent",ref:x,class:"mt-3",data:H,columns:s(L)},me({header:a(()=>[d("div",ge,[t(R,{modelValue:s($),"onUpdate:modelValue":o[6]||(o[6]=e=>O($)?$.value=e:null),variant:"primary",onChange:s(u).selectAllSuppliers},null,8,["modelValue","onChange"])])]),"cell-status":a(({row:e})=>[d("div",ve,[t(R,{id:e.data.id,modelValue:s(I),"onUpdate:modelValue":o[7]||(o[7]=le=>O(I)?I.value=le:null),value:e.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":a(({row:e})=>[t(Q,{to:{path:`suppliers/${e.data.id}/view`}},{default:a(()=>[t(N,{text:e.data.name,length:30,tag:"span",class:"font-medium text-primary-500 flex flex-col"},null,8,["text"]),t(N,{text:e.data.contact_name?e.data.contact_name:"",length:30,tag:"span",class:"text-xs text-gray-400"},null,8,["text"])]),_:2},1032,["to"])]),"cell-phone":a(({row:e})=>[d("span",null,m(e.data.phone?e.data.phone:"-"),1)]),"cell-due_amount":a(({row:e})=>[t(ee,{amount:e.data.due_amount||0,currency:e.data.currency},null,8,["amount","currency"])]),"cell-created_at":a(({row:e})=>[d("span",null,m(e.data.created_at),1)]),_:2},[z()?{name:"cell-actions",fn:a(({row:e})=>[t(fe,{row:e.data,table:s(x),"load-data":E},null,8,["row","table"])])}:void 0]),1032,["columns"])],512),[[A,!s(U)]])]),_:1})}}};export{Ie as default};
