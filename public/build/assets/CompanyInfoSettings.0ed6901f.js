import{H as te,a2 as ne,Q as oe,e as se,F as de,g as _,y as re,l as G,h as f,i as $,z as R,k as x,r as m,o as y,c as E,b as c,a as t,w as s,m as e,p as F,n as S,E as J,U as M,q as O,t as B,s as ie,aa as ue}from"./main.d0ffa6eb.js";import{_ as me}from"./DeleteCompanyModal.1fba518a.js";import{_ as pe}from"./UpgradeCompanyModal.bed863d0.js";const _e=["onSubmit"],be={key:2,class:"py-5"},fe={class:"text-lg leading-6 font-medium text-gray-900"},ge={class:"mt-2 max-w-xl text-sm text-gray-500"},ye={class:"mt-5"},Be={setup(ce){const g=te(),q=ne(),T=oe(),{t:b}=se(),j=de("utils");let p=_(!1);const n=re({name:null,name_ar:null,logo:null,letterhead:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""},address_street_1_ar:null,address_street_2_ar:null,state_ar:null,city_ar:null,phone_ar:null,zip_ar:null,cr:null,vat:null,account_name:null,bank_name:null,account_no:null,iban:null,swift_code:null,cr_ar:null,vat_ar:null,account_name_ar:null,bank_name_ar:null,account_no_ar:null,iban_ar:null,swift_code_ar:null});j.mergeSettings(n,{...g.selectedCompany});let v=_([]),w=_(null),N=_(null),V=_([]),U=_(null),z=_(null),I=_(null),r=_(!0);n.logo&&v.value.push({image:n.logo}),n.letterhead&&V.value.push({image:n.letterhead});const H=G(()=>({name:{required:f.withMessage(b("validation.required"),$),minLength:f.withMessage(b("validation.name_min_length"),R(3))},address:{country_id:{required:f.withMessage(b("validation.required"),$)}},cr:{required:f.withMessage(b("validation.required"),$),minLength:f.withMessage(b("validation.name_min_length",{count:3}),R(3))},vat:{required:f.withMessage(b("validation.required"),$)}})),i=x(H,G(()=>n));q.fetchCountries(),q.fetchLicencePlans();function P(o,a,C,d){N.value=d.name,w.value=a,I=null}function Q(){w.value=null,I="yes"}function A(o,a,C,d){z.value=d.name,U.value=a}function K(){U.value=null}async function W(){if(i.value.$touch(),i.value.$invalid)return!0;if(p.value=!0,(await g.updateCompany(n)).data.data){if(w.value){let a=new FormData;a.append("remove_logo",JSON.stringify({status:I})),a.append("company_logo",JSON.stringify({name:N.value,data:w.value})),await g.updateCompanyLogo(a)}if(U.value){let a=new FormData;a.append("company_letterhead",JSON.stringify({name:z.value,data:U.value})),await g.updateCompanyLetterHead(a)}p.value=!1}r.value=!0,p.value=!1}function X(o){T.openModal({title:b("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}const Y=g.licenceForm,Z={formData:{planname:{required:f.withMessage(b("validation.required"),$)}}};return x(Z,{formData:Y},{$scope:!1}),(o,a)=>{const C=m("BaseFileUploader"),d=m("BaseInputGroup"),k=m("BaseInputGrid"),u=m("BaseInput"),h=m("BaseTextarea"),ee=m("BaseMultiselect"),D=m("BaseIcon"),L=m("BaseButton"),ae=m("BaseDivider"),le=m("BaseSettingCard");return y(),E(ue,null,[c("form",{onSubmit:ie(W,["prevent"])},[t(le,{title:o.$t("settings.company_info.company_info"),description:o.$t("settings.company_info.section_description")},{default:s(()=>[t(k,{class:"mt-5"},{default:s(()=>[t(d,{label:o.$tc("settings.company_info.company_logo")},{default:s(()=>[t(C,{modelValue:e(v),"onUpdate:modelValue":a[0]||(a[0]=l=>F(v)?v.value=l:v=l),base64:"",onChange:P,onRemove:Q},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(k,{class:"mt-5"},{default:s(()=>[t(d,{label:o.$tc("settings.company_info.company_letter_head")},{default:s(()=>[t(C,{modelValue:e(V),"onUpdate:modelValue":a[1]||(a[1]=l=>F(V)?V.value=l:V=l),base64:"",onChange:A,onRemove:K},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(k,{class:"mt-5"},{default:s(()=>[t(d,{label:o.$tc("settings.company_info.company_name"),error:e(i).name.$error&&e(i).name.$errors[0].$message,required:""},{default:s(()=>[t(u,{modelValue:e(n).name,"onUpdate:modelValue":a[2]||(a[2]=l=>e(n).name=l),invalid:e(i).name.$error,onBlur:a[3]||(a[3]=l=>e(i).name.$touch()),disabled:e(r)},null,8,["modelValue","invalid","disabled"])]),_:1},8,["label","error"]),t(d,{label:o.$tc("settings.company_info.company_name_another")},{default:s(()=>[t(u,{modelValue:e(n).name_ar,"onUpdate:modelValue":a[4]||(a[4]=l=>e(n).name_ar=l),disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.phone")},{default:s(()=>[t(u,{modelValue:e(n).address.phone,"onUpdate:modelValue":a[5]||(a[5]=l=>e(n).address.phone=l),disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.phone_another")},{default:s(()=>[t(u,{modelValue:e(n).phone_ar,"onUpdate:modelValue":a[6]||(a[6]=l=>e(n).phone_ar=l),disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.state")},{default:s(()=>[t(u,{modelValue:e(n).address.state,"onUpdate:modelValue":a[7]||(a[7]=l=>e(n).address.state=l),name:"state",type:"text",disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.state_another")},{default:s(()=>[t(u,{modelValue:e(n).state_ar,"onUpdate:modelValue":a[8]||(a[8]=l=>e(n).state_ar=l),name:"state",type:"text",disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.city")},{default:s(()=>[t(u,{modelValue:e(n).address.city,"onUpdate:modelValue":a[9]||(a[9]=l=>e(n).address.city=l),type:"text",disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.city_another")},{default:s(()=>[t(u,{modelValue:e(n).city_ar,"onUpdate:modelValue":a[10]||(a[10]=l=>e(n).city_ar=l),type:"text",disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.zip")},{default:s(()=>[t(u,{modelValue:e(n).address.zip,"onUpdate:modelValue":a[11]||(a[11]=l=>e(n).address.zip=l),disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.zip_another")},{default:s(()=>[t(u,{modelValue:e(n).zip_ar,"onUpdate:modelValue":a[12]||(a[12]=l=>e(n).zip_ar=l),disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.address")},{default:s(()=>[t(h,{modelValue:e(n).address.address_street_1,"onUpdate:modelValue":a[13]||(a[13]=l=>e(n).address.address_street_1=l),rows:"2",style:{"margin-top":"8px","margin-bottom":"0px",height:"60px"},disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.address_another")},{default:s(()=>[t(h,{modelValue:e(n).address_street_1_ar,"onUpdate:modelValue":a[14]||(a[14]=l=>e(n).address_street_1_ar=l),rows:"2",style:{"margin-top":"8px","margin-bottom":"0px",height:"60px"},disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.address2")},{default:s(()=>[t(h,{modelValue:e(n).address.address_street_2,"onUpdate:modelValue":a[15]||(a[15]=l=>e(n).address.address_street_2=l),rows:"2",row:2,class:"mt-2",style:{"margin-top":"8px","margin-bottom":"0px",height:"60px"},disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.address2_another")},{default:s(()=>[t(h,{modelValue:e(n).address_street_2_ar,"onUpdate:modelValue":a[16]||(a[16]=l=>e(n).address_street_2_ar=l),rows:"2",row:2,class:"mt-2",style:{"margin-top":"8px","margin-bottom":"0px",height:"60px"},disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.cr"),error:e(i).cr.$error&&e(i).cr.$errors[0].$message,required:""},{default:s(()=>[t(u,{modelValue:e(n).cr,"onUpdate:modelValue":a[17]||(a[17]=l=>e(n).cr=l),type:"text",invalid:e(i).cr.$error,onBlur:a[18]||(a[18]=l=>e(i).cr.$touch()),disabled:e(r)},null,8,["modelValue","invalid","disabled"])]),_:1},8,["label","error"]),t(d,{label:o.$tc("settings.company_info.cr_another")},{default:s(()=>[t(u,{modelValue:e(n).cr_ar,"onUpdate:modelValue":a[19]||(a[19]=l=>e(n).cr_ar=l),type:"text",disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.vat"),error:e(i).vat.$error&&e(i).vat.$errors[0].$message,required:""},{default:s(()=>[t(u,{modelValue:e(n).vat,"onUpdate:modelValue":a[20]||(a[20]=l=>e(n).vat=l),invalid:e(i).vat.$error,onBlur:a[21]||(a[21]=l=>e(i).vat.$touch()),disabled:e(r)},null,8,["modelValue","invalid","disabled"])]),_:1},8,["label","error"]),t(d,{label:o.$tc("settings.company_info.vat_another")},{default:s(()=>[t(u,{modelValue:e(n).vat_ar,"onUpdate:modelValue":a[22]||(a[22]=l=>e(n).vat_ar=l),disabled:e(r)},null,8,["modelValue","disabled"])]),_:1},8,["label"]),t(d,{label:o.$tc("settings.company_info.country"),error:e(i).address.country_id.$error&&e(i).address.country_id.$errors[0].$message,required:""},{default:s(()=>[t(ee,{modelValue:e(n).address.country_id,"onUpdate:modelValue":a[23]||(a[23]=l=>e(n).address.country_id=l),label:"name",invalid:e(i).address.country_id.$error,options:e(q).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name",disabled:e(r)},null,8,["modelValue","invalid","options","disabled"])]),_:1},8,["label","error"])]),_:1}),e(r)?(y(),S(L,{key:1,loading:e(p),disabled:e(p),type:o.button,onClick:a[24]||(a[24]=l=>F(r)?r.value=!1:r=!1),class:"mt-6"},{left:s(l=>[e(p)?M("",!0):(y(),S(D,{key:0,class:J(l.class),name:"SaveIcon"},null,8,["class"]))]),default:s(()=>[O(" "+B(o.$tc("settings.company_info.edit")),1)]),_:1},8,["loading","disabled","type"])):(y(),S(L,{key:0,loading:e(p),disabled:e(p),type:o.submit,class:"mt-6"},{left:s(l=>[e(p)?M("",!0):(y(),S(D,{key:0,class:J(l.class),name:"SaveIcon"},null,8,["class"]))]),default:s(()=>[O(" "+B(o.$tc("settings.company_info.save")),1)]),_:1},8,["loading","disabled","type"])),e(g).companies.length!==1?(y(),E("div",be,[t(ae,{class:"my-4"}),c("h3",fe,B(o.$t("settings.company_info.delete_company")),1),c("div",ge,[c("p",null,B(o.$t("settings.company_info.delete_company_description")),1)]),c("div",ye,[c("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:X},B(o.$t("general.delete")),1)])])):M("",!0)]),_:1},8,["title","description"])],40,_e),t(me),t(pe)],64)}}};export{Be as default};
