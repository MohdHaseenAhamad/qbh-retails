import{H as N,Q as k,a2 as q,f as A,e as G,g as T,y as j,l as z,h as g,i as U,A as E,k as F,r as m,o as b,n as h,w as c,b as o,t as u,m as e,a as p,q as C,E as H,U as L,s as Q}from"./main.d0ffa6eb.js";const R={class:"flex justify-between w-full"},J={class:"px-6 pt-6"},K={class:"font-medium text-lg text-left"},O={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},P=["onSubmit"],W={class:"p-4 sm:p-6 space-y-4"},X={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},ee={setup(Y){const t=N(),i=k(),f=q(),$=A(),{t:y}=G();let n=T(!1);const l=j({id:t.selectedCompany.id,name:null}),w=z(()=>i.active&&i.componentName==="DeleteCompanyModal"),B={formData:{name:{required:g.withMessage(y("validation.required"),U),sameAsName:g.withMessage(y("validation.company_name_not_same"),E(t.selectedCompany.name))}}},a=F(B,{formData:l},{$scope:!1});async function x(){if(a.value.$touch(),a.value.$invalid)return!0;const r=t.companies[0];n.value=!0;try{const s=await t.deleteCompany(l);console.log(s.data.success),s.data.success&&(_(),await t.setSelectedCompany(r),$.push("/admin/dashboard"),await f.setIsAppLoaded(!1),await f.bootstrap()),n.value=!1}catch{n.value=!1}}function D(){l.id=null,l.name="",a.value.$reset()}function _(){i.closeModal(),setTimeout(()=>{D(),a.value.$reset()},300)}return(r,s)=>{const I=m("BaseInput"),S=m("BaseInputGroup"),v=m("BaseButton"),M=m("BaseIcon"),V=m("BaseModal");return b(),h(V,{show:e(w),onClose:_},{default:c(()=>[o("div",R,[o("div",J,[o("h6",K,u(e(i).title),1),o("p",O,u(r.$t("settings.company_info.delete_company_modal_desc",{company:e(t).selectedCompany.name})),1)])]),o("form",{action:"",onSubmit:Q(x,["prevent"])},[o("div",W,[p(S,{label:r.$t("settings.company_info.delete_company_modal_label",{company:e(t).selectedCompany.name}),error:e(a).formData.name.$error&&e(a).formData.name.$errors[0].$message,required:""},{default:c(()=>[p(I,{modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=d=>e(l).name=d),invalid:e(a).formData.name.$error,onInput:s[1]||(s[1]=d=>e(a).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),o("div",X,[p(v,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:_},{default:c(()=>[C(u(r.$t("general.cancel")),1)]),_:1}),p(v,{loading:e(n),disabled:e(n),variant:"danger",type:"submit"},{left:c(d=>[e(n)?L("",!0):(b(),h(M,{key:0,name:"TrashIcon",class:H(d.class)},null,8,["class"]))]),default:c(()=>[C(" "+u(r.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],40,P)]),_:1},8,["show"])}}};export{ee as _};
