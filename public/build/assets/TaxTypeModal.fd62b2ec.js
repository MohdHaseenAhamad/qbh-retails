import{av as C,Q as k,u as N,V as U,e as D,g as E,l as $,h as m,i as g,z as G,aw as L,a4 as j,k as Q,r as u,o as B,n as h,w as l,b as y,q as x,t as v,m as e,a as o,E as X,U as A,s as F}from"./main.d0ffa6eb.js";const H={class:"flex justify-between w-full"},J=["onSubmit"],K={class:"p-4 sm:p-6"},O={class:"z-0 flex justify-end p-4 border-t border-solid border--200 border-modal-bg"},Y={setup(P){const t=C(),i=k();N(),U();const{t:p,tm:R}=D();let d=E(!1);const w=$(()=>({currentTaxType:{name:{required:m.withMessage(p("validation.required"),g),minLength:m.withMessage(p("validation.name_min_length",{count:3}),G(3))},percent:{required:m.withMessage(p("validation.required"),g),between:m.withMessage(p("validation.enter_valid_tax_rate"),L(0,100))},description:{maxLength:m.withMessage(p("validation.description_maxlength",{count:255}),j(255))}}})),r=Q(w,$(()=>t));async function V(){if(r.value.currentTaxType.$touch(),r.value.currentTaxType.$invalid)return!0;try{const s=t.isEdit?t.updateTaxType:t.addTaxType;d.value=!0;let a=await s(t.currentTaxType);d.value=!1,i.refreshData&&i.refreshData(a.data.data),T()}catch{return d.value=!1,!0}}function T(){i.closeModal(),setTimeout(()=>{t.resetCurrentTaxType(),r.value.$reset()},300)}return(s,a)=>{const f=u("BaseIcon"),_=u("BaseInput"),c=u("BaseInputGroup"),I=u("BaseMoney"),M=u("BaseTextarea"),S=u("BaseSwitch"),q=u("BaseInputGrid"),b=u("BaseButton"),z=u("BaseModal");return B(),h(z,{show:e(i).active&&e(i).componentName==="TaxTypeModal",onClose:T},{header:l(()=>[y("div",H,[x(v(e(i).title)+" ",1),o(f,{name:"XIcon",class:"h-6 w-6 text-gray-500 cursor-pointer",onClick:T})])]),default:l(()=>[y("form",{action:"",onSubmit:F(V,["prevent"])},[y("div",K,[o(q,{layout:"one-column"},{default:l(()=>[o(c,{label:s.$t("tax_types.name"),variant:"horizontal",error:e(r).currentTaxType.name.$error&&e(r).currentTaxType.name.$errors[0].$message,required:""},{default:l(()=>[o(_,{modelValue:e(t).currentTaxType.name,"onUpdate:modelValue":a[0]||(a[0]=n=>e(t).currentTaxType.name=n),invalid:e(r).currentTaxType.name.$error,type:"text",onInput:a[1]||(a[1]=n=>e(r).currentTaxType.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(c,{label:s.$t("tax_types.name_ar"),variant:"horizontal"},{default:l(()=>[o(_,{modelValue:e(t).currentTaxType.name_ar,"onUpdate:modelValue":a[2]||(a[2]=n=>e(t).currentTaxType.name_ar=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{label:s.$t("tax_types.percent"),variant:"horizontal",error:e(r).currentTaxType.percent.$error&&e(r).currentTaxType.percent.$errors[0].$message,required:""},{default:l(()=>[o(I,{modelValue:e(t).currentTaxType.percent,"onUpdate:modelValue":a[3]||(a[3]=n=>e(t).currentTaxType.percent=n),currency:{decimal:".",thousands:",",symbol:"% ",precision:2,masked:!1},invalid:e(r).currentTaxType.percent.$error,class:"relative w-full focus:border focus:border-solid focus:border-primary",onInput:a[4]||(a[4]=n=>e(r).currentTaxType.percent.$touch())},null,8,["modelValue","currency","invalid"])]),_:1},8,["label","error"]),o(c,{label:s.$t("tax_types.description"),error:e(r).currentTaxType.description.$error&&e(r).currentTaxType.description.$errors[0].$message,variant:"horizontal"},{default:l(()=>[o(M,{modelValue:e(t).currentTaxType.description,"onUpdate:modelValue":a[5]||(a[5]=n=>e(t).currentTaxType.description=n),invalid:e(r).currentTaxType.description.$error,rows:"4",cols:"50",onInput:a[6]||(a[6]=n=>e(r).currentTaxType.description.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(c,{label:s.$t("tax_types.compound_tax"),variant:"horizontal",class:"flex flex-row-reverse"},{default:l(()=>[o(S,{modelValue:e(t).currentTaxType.compound_tax,"onUpdate:modelValue":a[7]||(a[7]=n=>e(t).currentTaxType.compound_tax=n),class:"flex items-center"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),y("div",O,[o(b,{class:"mr-3 text-sm",variant:"primary-outline",type:"button",onClick:T},{default:l(()=>[x(v(s.$t("general.cancel")),1)]),_:1}),o(b,{loading:e(d),disabled:e(d),variant:"primary",type:"submit"},{left:l(n=>[e(d)?A("",!0):(B(),h(f,{key:0,name:"SaveIcon",class:X(n.class)},null,8,["class"]))]),default:l(()=>[x(" "+v(e(t).isEdit?s.$t("general.update"):s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,J)]),_:1},8,["show"])}}};export{Y as _};
