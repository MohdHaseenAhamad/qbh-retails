import{H as ne,R as oe,ac as re,I as ie,g as h,e as ue,y as ce,l as b,Y as de,Z as pe,$ as me,r as n,o as m,n as _,w as t,a,b as u,S as w,T as A,m as s,E as C,q as g,t as p,J as B,U as S,L as _e,p as O}from"./main.d0ffa6eb.js";import{_ as fe}from"./SupplierIndexDropdown.85f182b8.js";import{A as ye}from"./AstronautIcon.0da5260a.js";const he={class:"flex items-center justify-end space-x-5"},ge={class:"pt-6"},Be={class:"flex"},ve={class:"relative table-container"},be={class:"relative flex items-center justify-end h-5"},Ce={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},Se={class:"absolute z-10 items-center left-6 top-2.5 select-none"},ke={class:"relative block"},Ee={setup(xe){ne();const Y=oe(),r=re(),k=ie();let x=h(null);const F=h(!0);let f=h(!1),I=h(!0);const{t:d}=ue();let c=ce({display_name:"",contact_name:"",phone:""});const V=b(()=>!r.totalSuppliers&&!I.value),$=b({get:()=>r.selectedSuppliers,set:l=>r.selectedSupplier(l)}),D=b({get:()=>r.selectAllField,set:l=>r.setSelectAllState(l)}),L=b(()=>[{key:"status",thClass:"extra w-10 pr-0",sortable:!1,tdClass:"font-medium text-gray-900 pr-0"},{key:"name",label:d("customers.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"category_name",label:d("categories.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"phone",label:d("customers.phone")},{key:"email",label:d("customers.email")},{key:"created_at",label:d("items.added_on")},{key:"actions",tdClass:"text-right text-sm font-medium pl-0",thClass:"pl-0",sortable:!1}]);de(c,()=>{W()},{debounce:500}),pe(()=>{r.selectAllField&&r.selectAllSuppliers()});function E(){x.value.refresh()}function W(){E()}function z(){return k.hasAbilities([B.DELETE_CUSTOMER,B.EDIT_CUSTOMER,B.VIEW_CUSTOMER])}async function H({page:l,filter:o,sort:y}){let T={display_name:c.display_name,contact_name:c.contact_name,phone:c.phone,orderByField:y.fieldName||"created_at",orderBy:y.order||"desc",page:l};I.value=!0;let i=await r.fetchSuppliers(T);return I.value=!1,F.value=i.data.data.length>0,{data:i.data.data,pagination:{totalPages:i.data.meta.last_page,currentPage:l,totalCount:i.data.meta.total,limit:10}}}function M(){c.display_name="",c.contact_name="",c.phone=""}function j(){f.value&&M(),f.value=!f.value}let U=h(new Date);U.value=me(U).format("YYYY-MM-DD");function G(){Y.openDialog({title:d("general.are_you_sure"),message:d("customers.confirm_delete",2),yesLabel:d("general.ok"),noLabel:d("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(l=>{l&&r.deleteMultipleSuppliers().then(o=>{o.data&&E()})})}return(l,o)=>{const y=n("BaseBreadcrumbItem"),T=n("BaseBreadcrumb"),i=n("BaseIcon"),v=n("BaseButton"),q=n("BasePageHeader"),J=n("BaseInput"),X=n("BaseInputGroup"),P=n("router-link"),Z=n("BaseFilterWrapper"),K=n("BaseEmptyPlaceholder"),Q=n("BaseDropdownItem"),ee=n("BaseDropdown"),R=n("BaseCheckbox"),N=n("BaseText"),te=n("BaseFormatMoney"),ae=n("BaseTable"),le=n("BasePage");return m(),_(le,null,{default:t(()=>[a(q,{title:l.$t("suppliers.title")},{actions:t(()=>[u("div",he,[w(a(v,{variant:"primary-outline",onClick:j},{right:t(e=>[s(f)?(m(),_(i,{key:1,name:"XIcon",class:C(e.class)},null,8,["class"])):(m(),_(i,{key:0,name:"FilterIcon",class:C(e.class)},null,8,["class"]))]),default:t(()=>[g(p(l.$t("general.filter"))+" ",1)]),_:1},512),[[A,s(r).totalSuppliers]]),s(k).hasAbilities(s(B).CREATE_CUSTOMER)?(m(),_(v,{key:0,onClick:o[0]||(o[0]=e=>l.$router.push("suppliers/create"))},{left:t(e=>[a(i,{name:"PlusIcon",class:C(e.class)},null,8,["class"])]),default:t(()=>[g(" "+p(l.$t("suppliers.add_new_supplier")),1)]),_:1})):S("",!0)])]),default:t(()=>[a(T,null,{default:t(()=>[a(y,{title:l.$t("general.home"),to:"dashboard"},null,8,["title"]),a(y,{title:l.$tc("suppliers.supplier",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),a(Z,{show:s(f),class:"mt-5",onClear:M},{default:t(()=>[a(X,{label:l.$t("customers.contact_name"),class:"text-left w-1/2"},{default:t(()=>[a(J,{modelValue:s(c).display_name,"onUpdate:modelValue":o[1]||(o[1]=e=>s(c).display_name=e),type:"text",name:"address_name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),u("div",ge,[F.value?(m(),_(P,{key:0,to:`/filtered-suppliers-list?display_name=${s(c).display_name}`,target:"_blank"},{default:t(()=>[a(v,{class:"mr-3",variant:"primary-outline",type:"button"},{default:t(()=>[u("span",Be,p(l.$t("Download")),1)]),_:1})]),_:1},8,["to"])):S("",!0)])]),_:1},8,["show"]),w(a(K,{title:l.$t("suppliers.no_suppliers"),description:l.$t("suppliers.list_of_suppliers")},{actions:t(()=>[s(k).hasAbilities(s(B).CREATE_CUSTOMER)?(m(),_(v,{key:0,variant:"primary-outline",onClick:o[2]||(o[2]=e=>l.$router.push("/admin/suppliers/create"))},{left:t(e=>[a(i,{name:"PlusIcon",class:C(e.class)},null,8,["class"])]),default:t(()=>[g(" "+p(l.$t("suppliers.add_new_supplier")),1)]),_:1})):S("",!0)]),default:t(()=>[a(ye,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[A,s(V)]]),w(u("div",ve,[u("div",be,[s(r).selectedSuppliers.length?(m(),_(ee,{key:0},{activator:t(()=>[u("span",Ce,[g(p(l.$t("general.actions"))+" ",1),a(i,{name:"ChevronDownIcon"})])]),default:t(()=>[a(Q,{onClick:G},{default:t(()=>[a(i,{name:"TrashIcon",class:"mr-3 text-gray-600"}),g(" "+p(l.$t("general.delete")),1)]),_:1})]),_:1})):S("",!0)]),a(ae,{ref_key:"tableComponent",ref:x,class:"mt-3",data:H,columns:s(L)},_e({header:t(()=>[u("div",Se,[a(R,{modelValue:s(D),"onUpdate:modelValue":o[3]||(o[3]=e=>O(D)?D.value=e:null),variant:"primary",onChange:s(r).selectAllSuppliers},null,8,["modelValue","onChange"])])]),"cell-status":t(({row:e})=>[u("div",ke,[a(R,{id:e.data.id,modelValue:s($),"onUpdate:modelValue":o[4]||(o[4]=se=>O($)?$.value=se:null),value:e.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":t(({row:e})=>[a(P,{to:{path:`suppliers/${e.data.id}/view`}},{default:t(()=>[a(N,{text:e.data.name,length:30,tag:"span",class:"font-medium text-primary-500 flex flex-col"},null,8,["text"]),a(N,{text:e.data.contact_name?e.data.contact_name:"",length:30,tag:"span",class:"text-xs text-gray-400"},null,8,["text"])]),_:2},1032,["to"])]),"cell-category_name":t(({row:e})=>[u("span",null,p(e.data.category?e.data.category.name+" ("+e.data.category.code+")":"-"),1)]),"cell-phone":t(({row:e})=>[u("span",null,p(e.data.phone?e.data.phone:"-"),1)]),"cell-due_amount":t(({row:e})=>[a(te,{amount:e.data.due_amount||0,currency:e.data.currency},null,8,["amount","currency"])]),"cell-created_at":t(({row:e})=>[u("span",null,p(e.data.formatted_created_at),1)]),_:2},[z()?{name:"cell-actions",fn:t(({row:e})=>[a(fe,{row:e.data,table:s(x),"load-data":E},null,8,["row","table"])])}:void 0]),1032,["columns"])],512),[[A,!s(V)]])]),_:1})}}};export{Ee as default};
