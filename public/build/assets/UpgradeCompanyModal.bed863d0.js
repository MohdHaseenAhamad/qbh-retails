import{F as C,H as U,Q as k,a2 as G,f as j,e as L,g as R,l as J,h as u,i as c,k as O,r as $,o as T,n as z,w as i,b as f,t as q,m as e,a as n,q as _,s as A,u as D}from"./main.d0ffa6eb.js";const H={class:"flex justify-between w-full"},P={class:"px-6 pt-6"},Q={class:"font-medium text-lg text-left"},x={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},E=["onSubmit"],K={class:"p-4 sm:p-6 space-y-4"},W={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},Z={setup(X){C("utils");const r=U(),y=k(),g=G();j();const{t:d}=L();let v=R(!1);const V=r.licenceForm,S=J(()=>y.active&&y.componentName==="UpgradeCompanyModal"),I={formData:{firstname:{required:u.withMessage(d("validation.required"),c)},planid:{required:u.withMessage(d("validation.required"),c)},lastname:{required:u.withMessage(d("validation.required"),c)},address:{required:u.withMessage(d("validation.required"),c)},country:{required:u.withMessage(d("validation.required"),c)},state:{required:u.withMessage(d("validation.required"),c)},city:{required:u.withMessage(d("validation.required"),c)},pincode:{required:u.withMessage(d("validation.required"),c)},companyName:{required:u.withMessage(d("validation.required"),c)},email:{required:u.withMessage(d("validation.required"),c)},phone:{required:u.withMessage(d("validation.required"),c)}}},a=O(I,{formData:V},{$scope:!1}),{global:b}=window.i18n;async function M(){if(a.value.$touch(),a.value.$invalid)return!0;v.value=!0;try{const l=await g.submitLicenceRequest(JSON.stringify(r.licenceForm));if(console.log("res"),console.log(l),l){console.log("inside result");let o={planId:r.licenceForm.planid,clientId:l.data.id};console.log(o);const p=await g.subscribeLicencePlan(JSON.stringify(o));if(console.log(p),p){console.log("subscribe"),console.log(p),console.log(p.data.plans[0].subscriptions.clientId),console.log(p.data.plans[0].subscriptions.planId),console.log(p.data.plans[0].subscriptions.id);try{(await g.updateClientLicence(p.data.plans[0])).data.status?(g.licenceRequestSent=!0,D().showNotification({type:"success",message:b.t("settings.company_info.licence.request_sent")})):D().showNotification({type:"error",message:b.t("settings.company_info.licence.request_error_internal")})}catch{D().showNotification({type:"error",message:b.t("settings.company_info.licence.request_error")})}}else console.log("not subscribed")}w(),v.value=!1}catch{v.value=!1,D().showNotification({type:"error",message:b.t("settings.company_info.licence.request_error_external")})}}function B(){V.id=null,V.name="",a.value.$reset()}function w(){y.closeModal(),setTimeout(()=>{B(),a.value.$reset()},300)}return(l,o)=>{const p=$("BaseMultiselect"),s=$("BaseInputGroup"),m=$("BaseInput"),N=$("BaseInputGrid"),F=$("BaseButton"),h=$("BaseModal");return T(),z(h,{show:e(S),onClose:w},{default:i(()=>[f("div",H,[f("div",P,[f("h6",Q,q(e(y).title),1),f("p",x,q(l.$t("settings.company_info.licence.upgrade_description",{company:e(r).selectedCompany.name})),1)])]),f("form",{action:"",onSubmit:A(M,["prevent"])},[f("div",K,[n(N,{class:"mt-5"},{default:i(()=>[n(s,{error:e(a).formData.planid.$error&&e(a).formData.planid.$errors[0].$message,label:l.$t("settings.company_info.licence.choose_plan",{company:e(r).selectedCompany.name})},{default:i(()=>[n(p,{required:"",modelValue:e(r).licenceForm.planid,"onUpdate:modelValue":o[0]||(o[0]=t=>e(r).licenceForm.planid=t),label:"planname",options:e(g).licences,"value-prop":"id","can-deselect":!1,"can-clear":!1,placeholder:l.$t("settings.company_info.licence.select_plan"),searchable:"","track-by":"id"},null,8,["modelValue","options","placeholder"])]),_:1},8,["error","label"]),n(s,{label:l.$tc("settings.company_info.company_name"),required:""},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.companyName,"onUpdate:modelValue":o[1]||(o[1]=t=>e(r).licenceForm.companyName=t),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),n(s,{label:l.$tc("settings.company_info.licence.form.firstname"),required:"",error:e(a).formData.firstname.$error&&e(a).formData.firstname.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.firstname,"onUpdate:modelValue":o[2]||(o[2]=t=>e(r).licenceForm.firstname=t),invalid:e(a).formData.firstname.$error,onInput:o[3]||(o[3]=t=>e(a).formData.firstname.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.lastname"),required:"",error:e(a).formData.firstname.$error&&e(a).formData.firstname.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.lastname,"onUpdate:modelValue":o[4]||(o[4]=t=>e(r).licenceForm.lastname=t),invalid:e(a).formData.lastname.$error,onInput:o[5]||(o[5]=t=>e(a).formData.lastname.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.address"),required:"",error:e(a).formData.address.$error&&e(a).formData.address.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.address,"onUpdate:modelValue":o[6]||(o[6]=t=>e(r).licenceForm.address=t),invalid:e(a).formData.address.$error,onInput:o[7]||(o[7]=t=>e(a).formData.address.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.country"),required:"",error:e(a).formData.country.$error&&e(a).formData.country.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.country,"onUpdate:modelValue":o[8]||(o[8]=t=>e(r).licenceForm.country=t),invalid:e(a).formData.country.$error,onInput:o[9]||(o[9]=t=>e(a).formData.country.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.state"),required:"",error:e(a).formData.state.$error&&e(a).formData.state.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.state,"onUpdate:modelValue":o[10]||(o[10]=t=>e(r).licenceForm.state=t),invalid:e(a).formData.state.$error,onInput:o[11]||(o[11]=t=>e(a).formData.state.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.city"),required:"",error:e(a).formData.city.$error&&e(a).formData.city.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.city,"onUpdate:modelValue":o[12]||(o[12]=t=>e(r).licenceForm.city=t),invalid:e(a).formData.city.$error,onInput:o[13]||(o[13]=t=>e(a).formData.city.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.pincode"),required:"",error:e(a).formData.pincode.$error&&e(a).formData.pincode.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.pincode,"onUpdate:modelValue":o[14]||(o[14]=t=>e(r).licenceForm.pincode=t),invalid:e(a).formData.pincode.$error,onInput:o[15]||(o[15]=t=>e(a).formData.pincode.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.email"),required:"",error:e(a).formData.email.$error&&e(a).formData.email.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.email,"onUpdate:modelValue":o[16]||(o[16]=t=>e(r).licenceForm.email=t),invalid:e(a).formData.email.$error,onInput:o[17]||(o[17]=t=>e(a).formData.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),n(s,{label:l.$tc("settings.company_info.licence.form.phone"),required:"",error:e(a).formData.phone.$error&&e(a).formData.phone.$errors[0].$message},{default:i(()=>[n(m,{modelValue:e(r).licenceForm.phone,"onUpdate:modelValue":o[18]||(o[18]=t=>e(r).licenceForm.phone=t),invalid:e(a).formData.phone.$error,onInput:o[19]||(o[19]=t=>e(a).formData.phone.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1})]),f("div",W,[n(F,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:w},{default:i(()=>[_(q(l.$t("general.cancel")),1)]),_:1}),n(F,{loading:e(v),variant:"success",type:"submit"},{default:i(()=>[_(q(l.$t("settings.company_info.licence.upgrade_request")),1)]),_:1},8,["loading"])])],40,E)]),_:1},8,["show"])}}};export{Z as _};
