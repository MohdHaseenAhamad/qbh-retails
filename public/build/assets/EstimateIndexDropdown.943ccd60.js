import{F as z,V as j,Q as P,u as V,R as U,I as J,e as O,x as q,f as F,r as T,o as r,n as l,w as o,m as i,a as c,q as m,t as d,U as g,J as f}from"./main.d0ffa6eb.js";const Q={props:{row:{type:Object,default:null},table:{type:Object,default:null}},setup(t){const E=t,D=z("utils"),w=j(),S=P(),$=V(),k=U(),y=J(),{t:n}=O(),I=q(),b=F();async function p(e){k.openDialog({title:n("general.are_you_sure"),message:n("estimates.confirm_delete"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(a=>{e=e,a&&w.deleteEstimate({ids:[e]}).then(s=>{s&&(E.table&&E.table.refresh(),s.data&&b.push("/admin/estimates"),w.$patch(h=>{h.selectedEstimates=[],h.selectAllField=!1}))})})}function x(e){k.openDialog({title:n("general.are_you_sure"),message:n("estimates.confirm_conversion"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(a=>{a&&w.convertToInvoice(e).then(s=>{s.data&&b.push(`/admin/invoices/${s.data.data.id}/edit`)})})}async function B(e){k.openDialog({title:n("general.are_you_sure"),message:n("estimates.confirm_revise"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(a=>{a&&w.cloneEstimate(e).then(s=>{b.push(`/admin/estimates/${s.data.data.id}/edit`)})})}function N(e){return(e.status=="SENT"||e.status=="VIEWED")&&I.name!=="estimates.view"&&y.hasAbilities(f.SEND_ESTIMATE)}async function A(e){S.openModal({title:n("estimates.send_estimate"),componentName:"SendEstimateModal",id:e.id,data:e,variant:"lg"})}async function M(e){k.openDialog({title:n("general.are_you_sure"),message:n("estimates.confirm_mark_as_accepted"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(a=>{const s={id:e,status:"ACCEPTED"};a&&w.markAsAccepted(s).then(h=>{E.table&&E.table.refresh()})})}async function L(e){k.openDialog({title:n("general.are_you_sure"),message:n("estimates.confirm_mark_as_rejected"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(a=>{const s={id:e,status:"REJECTED"};a&&w.markAsRejected(s).then(h=>{E.table&&E.table.refresh()})})}function _(){let e=`${window.location.origin}/estimates/pdf/${E.row.unique_hash}`;D.copyTextToClipboard(e),$.showNotification({type:"success",message:n("general.copied_pdf_url_clipboard")})}return(e,a)=>{const s=T("BaseIcon"),h=T("BaseButton"),u=T("BaseDropdownItem"),C=T("router-link"),R=T("BaseDropdown");return r(),l(R,{class:"z-20"},{activator:o(()=>[t.row.is_edit!="0"&&i(I).name==="estimates.view"?(r(),l(h,{key:0,variant:"primary"},{default:o(()=>[c(s,{name:"DotsHorizontalIcon",class:"text-white"})]),_:1})):(r(),l(s,{key:1,class:"text-gray-500",name:"DotsHorizontalIcon"}))]),default:o(()=>[t.row.is_edit!="0"&&i(I).name==="estimates.view"?(r(),l(u,{key:0,onClick:_},{default:o(()=>[c(s,{name:"LinkIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("general.copy_pdf_url")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&i(y).hasAbilities(i(f).EDIT_ESTIMATE)?(r(),l(C,{key:1,to:`/admin/estimates/${t.row.id}/edit`},{default:o(()=>[c(u,null,{default:o(()=>[c(s,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("general.edit")),1)]),_:1})]),_:1},8,["to"])):g("",!0),i(y).hasAbilities(i(f).DELETE_ESTIMATE)?(r(),l(u,{key:2,onClick:a[0]||(a[0]=v=>p(t.row.id))},{default:o(()=>[c(s,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("general.delete")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&i(I).name!=="estimates.view"&&i(y).hasAbilities(i(f).VIEW_ESTIMATE)?(r(),l(C,{key:3,to:`estimates/${t.row.id}/view`},{default:o(()=>[c(u,null,{default:o(()=>[c(s,{name:"EyeIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("general.view")),1)]),_:1})]),_:1},8,["to"])):g("",!0),t.row.is_edit!="0"&&i(y).hasAbilities(i(f).CREATE_INVOICE)&&t.row.status=="ACCEPTED"?(r(),l(u,{key:4,onClick:a[1]||(a[1]=v=>x(t.row.id))},{default:o(()=>[c(s,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("estimates.convert_to_invoice")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&t.row.status!=="SENT"&&i(I).name!=="estimates.view"&&i(y).hasAbilities(i(f).SEND_ESTIMATE)?(r(),l(u,{key:5,onClick:a[2]||(a[2]=v=>A(t.row))},{default:o(()=>[c(s,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("estimates.send_estimate")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&N(t.row)?(r(),l(u,{key:6,onClick:a[3]||(a[3]=v=>A(t.row))},{default:o(()=>[c(s,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("estimates.resend_estimate")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&t.row.status!=="ACCEPTED"&&i(y).hasAbilities(i(f).EDIT_ESTIMATE)?(r(),l(u,{key:7,onClick:a[4]||(a[4]=v=>M(t.row.id))},{default:o(()=>[c(s,{name:"CheckCircleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("estimates.mark_as_accepted")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&i(y).hasAbilities(i(f).EDIT_ESTIMATE)?(r(),l(u,{key:8,onClick:a[5]||(a[5]=v=>B(t.row))},{default:o(()=>[c(s,{name:"CheckCircleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("estimates.revise")),1)]),_:1})):g("",!0),t.row.is_edit!="0"&&t.row.status!=="REJECTED"&&i(y).hasAbilities(i(f).EDIT_ESTIMATE)?(r(),l(u,{key:9,onClick:a[6]||(a[6]=v=>L(t.row.id))},{default:o(()=>[c(s,{name:"XCircleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),m(" "+d(e.$t("estimates.mark_as_rejected")),1)]),_:1})):g("",!0)]),_:1})}}};export{Q as _};
