import{R as L,u as X,e as P,ah as N,x as O,I as $,Q as Y,F as z,r as c,o as f,n as p,w as e,m as i,a as r,J as D,q as g,t as b,U as x,H as j,g as E,l as I,L as A,E as F}from"./main.d0ffa6eb.js";import{_ as H}from"./BankDetailModal.ae909e8c.js";const R={props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(B){const t=B,h=L();X();const{t:u}=P(),S=N(),w=O(),a=$(),C=Y();z("utils");async function T(o){await S.fetchBankDetail(o),C.openModal({title:u("settings.bankdetail.edit_bank"),componentName:"BankDetailModal",size:"sm",refreshData:t.loadData&&t.loadData})}function v(o){h.openDialog({title:u("general.are_you_sure"),message:u("settings.bankdetail.confirm_delete"),yesLabel:u("general.ok"),noLabel:u("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async l=>{if(l){if((await S.deleteBankDetail(o)).data.success)return t.loadData&&t.loadData(),!0;t.loadData&&t.loadData()}})}return(o,l)=>{const d=c("BaseIcon"),n=c("BaseButton"),m=c("BaseDropdownItem"),_=c("BaseDropdown");return f(),p(_,null,{activator:e(()=>[i(w).name==="tax-types.view"?(f(),p(n,{key:0,variant:"primary"},{default:e(()=>[r(d,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(f(),p(d,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[i(a).hasAbilities(i(D).EDIT_TAX_TYPE)?(f(),p(m,{key:0,onClick:l[0]||(l[0]=k=>T(B.row.id))},{default:e(()=>[r(d,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),g(" "+b(o.$t("general.edit")),1)]),_:1})):x("",!0),i(a).hasAbilities(i(D).DELETE_TAX_TYPE)?(f(),p(m,{key:1,onClick:l[1]||(l[1]=k=>v(B.row.id))},{default:e(()=>[r(d,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),g(" "+b(o.$t("general.delete")),1)]),_:1})):x("",!0)]),_:1})}}},q={setup(B){const{t}=P();z("utils");const h=j(),u=N(),S=Y(),w=$(),a=E(null),C=E(h.selectedCompanySettings.tax_per_item),T=I(()=>[{key:"account_name",label:t("settings.bankdetail.account_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"account_no",label:t("settings.bankdetail.account_no"),tdClass:"font-medium text-gray-900"},{key:"bank_name",label:t("settings.bankdetail.bank_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);I({get:()=>C.value==="YES",set:async n=>{const m=n?"YES":"NO";let _={settings:{tax_per_item:m}};C.value=m,await h.updateCompanySettings({data:_,message:"general.setting_updated"})}});function v(){return w.hasAbilities([D.DELETE_TAX_TYPE,D.EDIT_TAX_TYPE])}async function o({page:n,filter:m,sort:_}){let k={orderByField:_.fieldName||"created_at",page:n},y=await u.fetchBankDetails(k);return{data:y.data.data,pagination:{totalPages:y.data.meta.last_page,currentPage:n,totalCount:y.data.meta.total,limit:5}}}async function l(){a.value&&a.value.refresh()}function d(){S.openModal({title:t("settings.bankdetail.add_new_bank_detail"),componentName:"BankDetailModal",size:"sm",refreshData:a.value&&a.value.refresh})}return(n,m)=>{const _=c("BaseIcon"),k=c("BaseButton"),y=c("BaseTable"),M=c("BaseSettingCard");return f(),p(M,{title:n.$t("settings.bankdetail.title")},A({default:e(()=>[r(H),r(y,{ref_key:"table",ref:a,class:"mt-16",data:o,columns:i(T)},A({"cell-account_name":e(({row:s})=>[g(b(s.data.account_name),1)]),"cell-account_no":e(({row:s})=>[g(b(s.data.account_no),1)]),"cell-bank_name":e(({row:s})=>[g(b(s.data.bank_name),1)]),_:2},[v()?{name:"cell-actions",fn:e(({row:s})=>[r(R,{row:s.data,table:a.value,"load-data":l},null,8,["row","table"])])}:void 0]),1032,["columns"])]),_:2},[i(w).hasAbilities(i(D).CREATE_TAX_TYPE)?{name:"action",fn:e(()=>[r(k,{type:"submit",variant:"primary-outline",onClick:d},{left:e(s=>[r(_,{class:F(s.class),name:"PlusIcon"},null,8,["class"])]),default:e(()=>[g(" "+b(n.$t("settings.bankdetail.add_new_bank_detail")),1)]),_:1})])}:void 0]),1032,["title"])}}};export{q as default};
