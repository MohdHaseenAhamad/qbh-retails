import{x as C,e as U,g as $,y as k,ab as q,l as f,r as u,o as m,c as w,b as h,a as t,w as i,m as e,t as x,n as g,aa as J,a9 as K,U as v,E as j,q as I,H as Y,F as O,K as Q,R as W,I as X,f as Z,J as N}from"./main.d0ffa6eb.js";import{u as V}from"./store.9cffc63a.js";import{L as ee}from"./LoadingIcon.272413e7.js";import{_ as te}from"./StoreIndexDropdown.3f9644f6.js";const ae={class:"fixed top-0 left-0 hidden h-full pt-16 pb-4 ml-56 bg-white xl:ml-64 w-88 xl:block"},se={class:"flex items-center justify-between px-4 pt-8 pb-2 border border-gray-200 border-solid height-full"},oe={class:"flex mb-6 ml-3",role:"group","aria-label":"First group"},ne={class:"px-4 py-3 pb-2 mb-2 text-sm border-b border-gray-200 border-solid"},le={class:"px-2"},re={class:"px-2"},ie={class:"h-full pb-32 overflow-y-scroll border-l border-gray-200 border-solid sidebar base-scroll"},de={class:"flex justify-center p-4 items-center"},ce={key:0,class:"flex justify-center px-4 mt-5 text-sm text-gray-600"},ue={setup(D){const p=V(),n=C(),{t:d}=U();let l=$(!1),o=$(!1),s=k({orderBy:"",orderByField:"",searchText:""});b=q.exports.debounce(b,500);const y=f(()=>s.orderBy==="asc"||s.orderBy==null);f(()=>y.value?d("general.ascending"):d("general.descending"));function r(c){return n.params.id==c}async function B(){o.value=!0,await p.fetchStores({limit:"all"}),o.value=!1,setTimeout(()=>{S()},500)}function S(){const c=document.getElementById(`customer-${n.params.id}`);c&&(c.scrollIntoView({behavior:"smooth"}),c.classList.add("shake"))}async function b(){let c={};s.searchText!==""&&s.searchText!==null&&s.searchText!==void 0&&(c.display_name=s.searchText),s.orderBy!==null&&s.orderBy!==void 0&&(c.orderBy=s.orderBy),s.orderByField!==null&&s.orderByField!==void 0&&(c.orderByField=s.orderByField),l.value=!0;try{let _=await p.fetchStores(c);l.value=!1,_.data&&(p.suppliers=_.data.data)}catch{l.value=!1}}function A(){return s.orderBy==="asc"?(s.orderBy="desc",b(),!0):(s.orderBy="asc",b(),!0)}return B(),(c,_)=>{const T=u("BaseIcon"),P=u("BaseInput"),L=u("BaseButton"),E=u("BaseRadio"),z=u("BaseInputGroup"),R=u("BaseDropdownItem"),H=u("BaseDropdown"),F=u("BaseText"),G=u("router-link");return m(),w("div",ae,[h("div",se,[t(P,{modelValue:e(s).searchText,"onUpdate:modelValue":_[0]||(_[0]=a=>e(s).searchText=a),placeholder:c.$t("general.search"),"container-class":"mb-6",type:"text",variant:"gray",onInput:_[1]||(_[1]=a=>b())},{default:i(()=>[t(T,{name:"SearchIcon",class:"text-gray-500"})]),_:1},8,["modelValue","placeholder"]),h("div",oe,[t(H,{"close-on-select":!1,position:"bottom-start","width-class":"w-40","position-class":"left-0"},{activator:i(()=>[t(L,{variant:"gray"},{default:i(()=>[t(T,{name:"FilterIcon"})]),_:1})]),default:i(()=>[h("div",ne,x(c.$t("general.sort_by")),1),h("div",le,[t(R,{class:"flex px-1 py-2 mt-1 cursor-pointer hover:rounded-md"},{default:i(()=>[t(z,{class:"pt-2 -mt-4"},{default:i(()=>[t(E,{id:"filter_create_date",modelValue:e(s).orderByField,"onUpdate:modelValue":[_[2]||(_[2]=a=>e(s).orderByField=a),b],label:c.$t("customers.create_date"),size:"sm",name:"filter",value:"invoices.created_at"},null,8,["modelValue","label"])]),_:1})]),_:1})]),h("div",re,[t(R,{class:"flex px-1 cursor-pointer hover:rounded-md"},{default:i(()=>[t(z,{class:"pt-2 -mt-4"},{default:i(()=>[t(E,{id:"filter_display_name",modelValue:e(s).orderByField,"onUpdate:modelValue":[_[3]||(_[3]=a=>e(s).orderByField=a),b],label:c.$t("stores.display_name"),size:"sm",name:"filter",value:"name"},null,8,["modelValue","label"])]),_:1})]),_:1})])]),_:1}),t(L,{class:"ml-1",size:"md",variant:"gray",onClick:A},{default:i(()=>[e(y)?(m(),g(T,{key:0,name:"SortAscendingIcon"})):(m(),g(T,{key:1,name:"SortDescendingIcon"}))]),_:1})])]),h("div",ie,[(m(!0),w(J,null,K(e(p).suppliers,(a,M)=>(m(),w("div",{key:M},[a&&!e(o)?(m(),g(G,{key:0,id:"supplier-"+a.id,to:`/admin/stores/${a.id}/view`,class:j(["flex justify-between p-4 items-center cursor-pointer hover:bg-gray-100 border-l-4 border-transparent",{"bg-gray-100 border-l-4 border-primary-500 border-solid":r(a.id)}]),style:{"border-top":"1px solid rgba(185, 193, 209, 0.41)"}},{default:i(()=>[h("div",null,[t(F,{text:a.name+" ("+a.code+")",length:30,class:"pr-2 text-sm not-italic font-normal leading-5 text-black capitalize truncate"},null,8,["text"]),a.contact_name?(m(),g(F,{key:0,text:a.contact_name,length:30,class:"mt-1 text-xs not-italic font-medium leading-5 text-gray-600"},null,8,["text"])):v("",!0),a.address_street_1||a.address_street_2||a.city||a.state||a.zip?(m(),g(F,{key:1,text:(a.address_street_1?a.address_street_1:"")+" "+(a.address_street_2?a.address_street_2:"")+" "+(a.city?a.city:"")+" "+(a.state?a.state:"")+" "+(a.zip?a.zip:""),length:30,class:"mt-1 text-xs not-italic font-medium leading-5 text-gray-600"},null,8,["text"])):v("",!0)])]),_:2},1032,["id","to","class"])):v("",!0)]))),128)),h("div",de,[e(o)?(m(),g(ee,{key:0,class:"h-6 m-1 animate-spin text-primary-400"})):v("",!0)]),!e(p).suppliers.length&&!e(o)?(m(),w("p",ce,x(c.$t("customers.no_matching_customers")),1)):v("",!0)])])}}},me={class:"pt-6 mt-2 border-solid lg:pt-8 md:pt-4 border-gray-200"},pe={setup(D){const p=V(),n=f(()=>p.selectedViewSupplier),d=f(()=>p.isFetchingViewData),l=f(()=>n?.value?.fields?n?.value?.fields:[]);return(o,s)=>{const y=u("BaseHeading"),r=u("BaseDescriptionListItem"),B=u("BaseDescriptionList");return m(),w("div",me,[t(y,null,{default:i(()=>[I(x(o.$t("customers.basic_info")),1)]),_:1}),t(B,null,{default:i(()=>[t(r,{"content-loading":e(d),label:o.$t("stores.display_name"),value:e(n)?.name??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("stores.code"),value:e(n)?.code??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("stores.contact_name"),value:e(n)?.contact_name??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("customers.email"),value:e(n)?.email??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("customers.phone_number"),value:e(n)?.phone??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("customers.description"),value:e(n)?.description??"N/A"},null,8,["content-loading","label","value"])]),_:1}),t(y,{class:"mt-8"},{default:i(()=>[I(x(o.$t("stores.address")),1)]),_:1}),t(B,null,{default:i(()=>[t(r,{"content-loading":e(d),label:o.$t("stores.address_street_1"),value:e(n)?.address_street_1??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("stores.address_street_2"),value:e(n)?.address_street_2??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("stores.state"),value:e(n)?.state??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("stores.city"),value:e(n)?.city??"N/A"},null,8,["content-loading","label","value"]),t(r,{"content-loading":e(d),label:o.$t("stores.zip"),value:e(n)?.zip??"N/A"},null,8,["content-loading","label","value"])]),_:1}),e(l).length>0?(m(),g(y,{key:0,class:"mt-8"},{default:i(()=>[I(x(o.$t("settings.custom_fields.title")),1)]),_:1})):v("",!0)])}}},_e={setup(D){Y();const p=V();O("utils");const n=C();let d=$(!1),l=k({}),o=k({});k(["This year","Previous year"]);let s=$("This year");f(()=>l.expenseTotals?l.expenseTotals:[]),f(()=>l.netProfits?l.netProfits:[]),f(()=>l&&l.months?l.months:[]),f(()=>l.receiptTotals?l.receiptTotals:[]),f(()=>l.invoiceTotals?l.invoiceTotals:[]),Q(n,()=>{n.params.id&&y(),s.value="This year"},{immediate:!0});async function y(){d.value=!1;let r=await p.fetchViewStore({id:n.params.id});r.data&&(Object.assign(l,r.data.meta.chartData),Object.assign(o,r.data.data)),d.value=!0}return(r,B)=>{const S=u("BaseCard");return m(),g(S,{class:"flex flex-col mt-6"},{default:i(()=>[t(pe)]),_:1})}}},he={setup(D){O("utils"),W();const p=V(),n=X();U();const d=Z(),l=C();$(null);const o=f(()=>p.selectedViewSupplier.supplier?p.selectedViewSupplier.supplier.name:"");let s=f(()=>p.isFetchingViewData);function y(){return n.hasAbilities([N.DELETE_CUSTOMER,N.EDIT_CUSTOMER])}function r(){d.push("/admin/stores")}return(B,S)=>{const b=u("BaseButton"),A=u("router-link"),c=u("BasePageHeader"),_=u("BasePage");return m(),g(_,{class:"xl:pl-96"},{default:i(()=>[t(c,{title:e(o)},{actions:i(()=>[e(n).hasAbilities(e(N).EDIT_STORE)?(m(),g(A,{key:0,to:`/admin/stores/${e(l).params.id}/edit`},{default:i(()=>[t(b,{class:"mr-3",variant:"primary-outline","content-loading":e(s)},{default:i(()=>[I(x(B.$t("general.edit")),1)]),_:1},8,["content-loading"])]),_:1},8,["to"])):v("",!0),y()?(m(),g(te,{key:1,class:j({"ml-3":e(s)}),row:e(p).selectedViewSupplier,"load-data":r},null,8,["class","row"])):v("",!0)]),_:1},8,["title"]),t(ue),t(_e)]),_:1})}}};export{he as default};
